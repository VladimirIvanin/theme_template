{% comment %}
  галерея
{% endcomment %}
<div class="product-gallery gallery
            lg-grid-5 md-grid-5 sm-grid-5 xs-grid-12"
>
{% comment %}
  основное изображение
{% endcomment %}
  <div class="gallery-large_image">
    <a  href="{{ product.first_image.original_url }}"

        title="{{ product.title }}"
        alt="{{ product.title }}"

        id="MagicZoom"
        class="MagicZoomPlus js-image--large"

        rel="right-click: true"
    >
      <img  src="{{ product.first_image.large_url }}"

            alt="{{ product.title }}"
            title="{{ product.title }}"
      />
    </a>
  </div>

  {% comment %}
    миниатюрки
  {% endcomment %}
  {% if product.images.size > 1 %}
    <div class="slider slider--gallery">
      {% if product.images.size > 3 %}
        <div class="slider-control--gallery">
          <div class="slider-left--gallery js-slider-left">
            <i class="fa fa-chevron-left"></i>
          </div>
          <div class="slider-right--gallery js-slider-right">
            <i class="fa fa-chevron-right"></i>
          </div>
        </div>
      {% endif %}

      <ul class="gallery-preview_list gallery-preview_list--horizontal
                js-slider--gallery"
      >
        {% for image in product.images %}

          <li class="gallery-preview image-wrapper">
            <a  href="{{ image.original_url }}"

                alt="{{ product.title }}"
                title="{{ product.title }}"

                class="gallery-image
                      {% if forloop.first %} gallery-image--current {% endif %}
                      image-square
                      js-image--preview"
                data-large-image="{{ image.large_url }}"

                rel="zoom-id:MagicZoom"
            >
              <img src="{{ image.compact_url }}" />
            </a>
          </li>

        {% endfor %}
      </ul>
    </div>
  {% endif %}

</div>

{% comment %}
  информация о товаре
{% endcomment %}
<div class="product-info
            lg-grid-7 md-grid-7 sm-grid-7 xs-grid-12"
>

  <h1 class="product-title">{{ product.title | editable }}</h1>

  {% comment %}
    описание и хар-ки
  {% endcomment %}
  {% if product.short_description %}
    <div class="product-short_description editor">
      {{ product.short_description | editable }}
    </div>
  {% endif %}

  {% comment %}
    артикул
  {% endcomment %}
  <div class="product-sku js-product-sku">
    Артикул:
    <span class="product-sku_field js-product-sku_field">
      {{ product.variants.first.sku }}
    </span>
  </div>

  {% comment %}
    статус
  {% endcomment %}
  <div class="product-presence">
    Наличие:
    <span class="product-presence_field js-product-presence">
      {% if product.available %}
        Есть в наличии
      {% else %}
        Нет в наличии
      {% endif %}
    </span>
  </div>

  {% comment %}
    форма
  {% endcomment %}
  <form action="{{ cart_url }}" method="post" id="order" class="product-order">

    {% comment %}
      цены
    {% endcomment %}
    <div class="product-prices prices">
      {% if product.old_price %}
        <span class="prices-old js-prices-old">
          {{ product.old_price | money }}
        </span>
      {% endif %}

      <span class="prices-current js-price-current">
        {{ product.price | money }}
      </span>
    </div>

    {% comment %}
      выбор модификаций
    {% endcomment %}
    {% if product.show_variants? %}
      <div class="product-variants">
        <select name="variant_id" id="variant-select">
          {% for variant in product.variants %}
            <option value="{{ variant.id }}">{{ variant.title | escape }}</option>
          {% endfor %}
        </select>
      </div>
    {% else %}
      <input type="hidden" name="variant_id" value="{{ product.variants.first.id }}" />
    {% endif %}

    <div class="row">
      {% comment %}
        кол-во товара
      {% endcomment %}
      <div class="product-quantity quantity quantity--inline">

        <div class="quantity-button quantity-button--minus js-quantity-minus">
          <i class="fa fa-minus"></i>
        </div>

        <input type="text"
                name="quantity"
                value="1"
                class="quantity-input js-quantity-input"
        />

        <div class="quantity-button quantity-button--plus js-quantity-plus">
          <i class="fa fa-plus"></i>
        </div>

      </div>

      <button class="product-buy button button--buy js-buy" value="В корзину">
        <i class="fa fa-shopping-cart"></i>
        В корзину
      </button>
    </div>

  </form>

  {% comment %}
    сравнение
  {% endcomment %}
  <div class="compare-trigger">
    <span class="button compare-add js-compare-add" data-product_id="{{ product.id }}">
      <i class="fa fa-bar-chart"></i>добавить к сравнению
    </span>
    <span class="compare-added">
      <i class="fa fa-check"></i>добавлен в сравнение
    </span>
  </div>

  {% comment %}
    избранное
  {% endcomment %}
  <div class="favorite-trigger">
    <span class="button favorite-add js-favorite-add"
          data-product_id="{{ product.id }}"
    >
      <i class="fa fa-heart-o"></i>добавить в избранное
    </span>
    <span class="button favorite-remove js-favorite-remove"
          data-product_id="{{ product.id }}"
    >
      <i class="fa fa-heart"></i>убрать из избранного
    </span>
  </div>

  {% if account.reviews_enabled? %}
    <div>
      <span class="reviews-link js-reviews-toggle"
            name="reviews"
      >
        Отзывы:
        <span class="reviews-total_count">
          {{ product.reviews_count }}
        </span>
      </span>
    </div>
  {% endif %}

  {% if product.rating %}
    <div class="rating">
      <label class="rating-label">Рейтинг товара:</label>

      <select class="js-rating-read_only">
        {% for i in (1..5) %}
          <option value="{{ i }}" {% if product.rating == i %}selected="selected" {% endif %}>
            {{ i }}
          </option>
        {% endfor %}
      </select>

    </div>
  {% endif %}
</div>

<div class="tubs grid-12">
  <ul class="tubs-controls tubs-controls--horizontal">
    <li class="tubs-node tubs-node--active" data-target="#tub1">
      Описание
    </li>
    <li class="tubs-node" data-target="#tub2">
      Характеристики
    </li>
    {% if account.reviews_enabled? %}
      <li class="tubs-node js-tub-review" data-target="#tub3">
        Отзывы
      </li>
    {% endif %}
  </ul>

  <div id="tub1" class="tubs-content tubs-content--active">
    {% comment %}
      описание
    {% endcomment %}
    <div class="product-description editor">
      {{ product.description | editable }}
    </div>
  </div>

  <div id="tub2" class="tubs-content">
    {% if product.properties.size > 0 %}
      <!-- <p>Параметры:</p>-->
      <table class="product-properties">
        {% for property in product.properties %}
          <tr>
            <td class="property-title">{{ property.title }}:</td>
            <td class="property-values">
              {% for item in property.characteristics %}
                {{ item.title }}
                {% unless forloop.last %}, {% endunless %}
              {% endfor %}
            </td>
          </tr>
        {% endfor %}
      </table>
    {% endif %}
  </div>

  <div id="tub3" class="tubs-content">
    {% if account.reviews_enabled? %}
      {% comment %}
        вывод отзывов
      {% endcomment %}
      {% include "product_reviews" %}
    {% endif %}
  </div>
</div>

<div class="grid-12">
  {% comment %}
    вывод сопутка
  {% endcomment %}
  {% assign related = product.related_products %}
  {% if related.size > 0 %}
    <div class="slider slider--product">
      <div class="slider-title">
        Cопутствующие
      </div>

      {% if related.size > 4 %}
        <div class="slider-control">
          <div class="slider-left js-slider-left">
            <i class="fa fa-chevron-left"></i>
          </div>
          <div class="slider-right js-slider-right">
            <i class="fa fa-chevron-right"></i>
          </div>
        </div>
      {% endif %}

      <div class="js-slider-container owl-carousel">
        {% for product in related %}
          {% include "product_preview" %}
        {% endfor %}
      </div>

    </div>
  {% endif %}

  {% comment %}
    вывод аналогичных
  {% endcomment %}
  {% assign similar = product.similar_products %}
  {% if similar.size > 0 %}
    <div class="slider slider--product">
      <div class="slider-title">
        Аналогичные
      </div>

      {% if similar.size > 4 %}
        <div class="slider-control">
          <div class="slider-left js-slider-left">
            <i class="fa fa-chevron-left"></i>
          </div>
          <div class="slider-right js-slider-right">
            <i class="fa fa-chevron-right"></i>
          </div>
        </div>
      {% endif %}

      <div class="js-slider-container owl-carousel">
        {% for product in similar %}
          {% include "product_preview" %}
        {% endfor %}
      </div>
    </div>
  {% endif %}

</div>

<script type="text/javascript">
  $(function(){
    var
      $config = {
        selector: '#variant-select',
        product:  {{ product | json }},
        settings: {
          params:{
            'модификация': 'select',
          },
        },
      };

    selectors = new InSales.OptionSelectors( $config );
  });
</script>